<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>JS4-1. 배열변수와 객체</title>
      <style>
         /* 동영상 주변 암전효과 박스 */
         body::before {
            content: "";
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.592);
         }
         /* body에 클래스 on 설정시 보임 */
         body.on::before {
            display: block;
         }
         h1 {
            text-align: center;
         }

         /* 정보출력박스 */
         .cont {
            width: 1000px;
            height: 80px;
            border: 2px solid #000;
            text-align: center;
            white-space: nowrap;
            line-height: 84px;
            margin: 5px auto;
            font-size: 24px;
         }
         /* 초이스 버튼 클래스 on  */
         .choice button.on {
            border: 4px solid red;
            border-radius: 10px;
            background-color: navy;
            color: #fff;
            font-weight: bold;
            transform: scale(1.2);
         }
      </style>

      <!-- 객체 외부 JS 불러오기 -->
      <script src="./js/js4-1.object.js"></script>

      <script>         
         // 로딩구역//////////////////////////////////////////
         // DOMContentLoaded 는 HTML태그 로딩후
         // 발생하는 이벤트임 (load 이벤트와 비교)
         window.addEventListener("DOMContentLoaded", loadFn);

         /*****************************************************
                    [ 함수명 : loadFn ]
                    기능: 로딩 후 실행함수 
         *****************************************************/
         function loadFn() {
            // 1. 함수호출확인!
            console.log("로딩완료");

            // 2. 출력대상 : .cont
            const target = document.querySelectorAll(".cont");

            console.log("타겟:", target);
         
            
// *****************************************************
// **********< target 3어렵구 중요!> ********************

      /* __TEST_target[0]__ */  
         // 객체선언   
            const miu ={name:'미유',year:'7세',weight:'7kg',favorite:'츄르',show:function(a,b){
                //이함수 클릭이벤트는 target[3]에 걸었음.
               
                //여기서 a는 이벤트클릭건 익명함수의 text 매개변수
                //여기서 b는 이벤트클릭건 익명함수의 this 값
                b.style.lineHeight = '200px';
                b.innerHTML = a;

               console.log('함수랑 this 찍으까:',miu.show,this);
               //객체 리터럴 안에서 함수명을 show:miuFn(){}같이 직접함수이름을 사용할 수 없다!
               
            }};

      
            target[0].innerHTML = `이름: ${miu.name}/ 나이: ${miu['year']}/ 몸무게 ${miu.weight}/ 좋아하는간식:${miu.favorite}`;
      
      /* __TEST_target[1]__ */  
         // 배열선언
            const txt =['미유는','사람을','좋아해','가장','좋아하는','사람은','노영이 (뒷함수무시!)',function(){
               console.log('함수 메서드 호출!this는?:',this);
               alert('클릭됐다!')
               this.style.backgroundColor = 'green';
               this.style.transform = 'rotate(360deg)';
               this.style.transition ='1s ease-in-out';

               //이함수 클릭이벤트는 target[2]에 걸었음.

               
            }]; // txt배열 //

            // console.log('배열전체와 함수콘솔에찍기',txt,txt[7]);

            target[1].innerHTML = txt.join('~!! ');

      /* __TEST_target[2]__ */  
            target[2].innerHTML = 
            `여기에 <br>클릭이벤트 걸 꺼에요!`;
            target[2].style.lineHeight ='35px';
            target[2].title ='나를 클릭하세요!';
            target[2].style.cursor = 'pointer';
            target[2].onclick =txt[7];

      /* __TEST_target[3]__ */  
      target[3].innerHTML =`miu 객체안의 메서드함수 show에 매개변수를(a,b) 받아서 실행해볼거에요 `;
      target[3].title ='클릭시 함수실행!';
      target[3].style.cursor = 'pointer';

// *****************************************************
// **********< target 3어렵구 중요!> ********************

      target[3].onclick = function(){
         let text = `클릭되면 실행되는 익명함수서 받아온 글! (text)`; 
         console.log(text,this);
         this.style.backgroundColor ='yellow';
         this.style.transform = 'scale(1.2) rotate(-720deg)';
         this.style.transition ='1s ease-in-out';
         // this.innerHTML = text; 
         // 여기서 할수도있지만 매개변수를 통해 전달해서
         // 이너텍스트 바꿀예정

         miu.show(text,this);
      };

      /* __TEST_target[4]__ */  
        const NY ={
            name:'노영',
            tall:'171cm',
            고양이:'미유',
            미유나이:'7살',
            얍:function(){
                console.log(this);
                this.style.backgroundColor = 'lightyellow';
                this.style.transform = 'rotate(360deg)';
                this.style.transition = '1s ease-in-out';
            }, //얍 메서드
            
        }; ///NY객체
        target[4].innerHTML =`
        내 이름은 ${NY.name}키는 ${NY.tall}입니다. <br> 고양이 이름은 ${NY.고양이}이고, 나이는 ${NY.미유나이}입니다.`;
        target[4].onclick = NY.얍;
        target[4].style.lineHeight = '40px';  


      /* __TEST_target[5]__ */
      /* 빈 객체만들고 할당하기 */  
        let cat = {};

        cat.name = '미유'
        cat.year = '7살'
        cat.color = '하얀색'
        cat.gender = '여자'
        cat.video = function(){
         /* 선언전 함수호출(영상 값) */
         showMV('FhA37Sw4j8w');
        };
        console.log(cat);

      //5번박스 셋팅 함수
      const box5 = function(){
         //내부출력
        target[5].innerHTML = 
        `선택버튼정보 <br> ★ 이름은:${cat.name} ★나이는:${cat.year}
        ★색깔은:${cat.color} ★성별은:${cat.gender}`;

         //툴팁,커서, 대상박스랑 객체안에있는 함수랑연결
        target[5].title = `${cat.name}친구들을 보려면 클릭하세냥!`;
        
        target[5].onclick = cat.video;
      };
      
      //위는 클릭후실행이고 여긴 초기설정
      target[5].style.cursor = 'pointer';
      target[5].style.fontSize = "20px";
      target[5].style.fontWeight = "bold";
      target[5].style.lineHeight = '40px';  
              // (출력전) 출력박스 CSS조정하기


      box5();

   

      /* __버튼박스 .choice__ */  

      //버튼박스에 넣을 이름 배열만들기
      let name = [
         '민지',
         '노영',
         '윤철',
         '현우',
      ];
      console.log(name);
      
      const nameNum =name.length;
      console.log(nameNum);

      //for문돌려서 배열수만큼 버튼넣기
      for (let i = 0; i < nameNum; i++) {
        

         target[6].innerHTML +=
         //백틱에서 1,3버튼에만 삼항연산자로 클래스넣기 
         
         `<button ${i==0||i==3?'class="on"':''}
         style= margin-left:20px>${name[i]} 버튼</button>`;

         if(i==1||i==3){
            target[6].innerHTML +=`<br>`;
         }

      };/////for문////
            target[6].style.lineHeight = '40px';
            target[6].style.fontSize = '30px';

         
         //버튼전체, 버튼갯수 변수만듬
         let namebtn = target[6].querySelectorAll('button');
         console.log(namebtn);
         let btnlang = namebtn.length;
         console.log(btnlang);

         console.log(namebtn,btnlang);
         
         //버튼갯수변수로 포문 돌려서 버튼이너텍스트 변수만듬
         for (let i = 0; i < btnlang; i++) {
            /* 각각버튼에 이벤트걸기 */
            namebtn[i].onclick = function(){
               
               let btntxt = this.innerText;
               console.log(btntxt);
               /* 값읽어서 일치시 객체덮어 데이타다시 띄우기 */

                  // 영화정보 변경전 찍어보기
                  // 각자 자기의 변수를 찍는다!
                  console.log('변경전 영화객체',cat);


               switch(btntxt){
                  case '민지 버튼':
                     cat = mj;
                     break;

                  case '노영 버튼':
                     cat = ny;
                     break;

                  case '윤철 버튼':
                     cat = yc;
                     break;

                  case '현우 버튼':
                     cat = hw;
                     break;
                  }
                  
                  // 객체값 덮어서 다시띄움
                  box5();

                  console.log('변경후 영화객체',cat);

            };
         }; ////for문////////
         



      


            
         } //////////////loadFn함수////////////////////////////
         /////////////////////////////////////////////////////
   //위에서 showMV(값) 일케 먼저쓴 함수 이제선언

//얘가 로드 fn 함수내에 있으면 전역함수가 아니라서 부를수없음

   function showMV(MVvalue){
         console.log(MVvalue);
      document.body.innerHTML +=  /*  +=로 안쓰면 다날라감 */
      `
      <div id="mv">
         <iframe class="mv" src="https://www.youtube.com/embed/${MVvalue}?autoplay=1"allow="autoplay"></iframe>
            <button class="btn">닫기</button> 
         </div>
      `;
      // 재생박스CSS설정
      const mv = document.querySelector('#mv');
      const mvCss = mv.style;
      mvCss.position = 'absolute';
      mvCss.width ='700px';
      mvCss.height ='500px';
      mvCss.top ='50%';
      mvCss.left ='50%';
      mvCss.transform = 'translate(-50%,-50%)';
            // 아이프레임 CSS설정
            let ifr = mv.querySelector("iframe");
            let ifrcss = ifr.style;
            ifrcss.border = "none";
            ifrcss.width = "100%";
            ifrcss.height = "100%";

            //버튼설정
            let btn = mv.querySelector(".btn");

            //cssTest로 설정하면 한번에 주르륵쓰기가능. 단 다른css덮어써서 없어져버림
            
            btn.style.cssText = `
               position: absolute;
               top : 0;
               right : -70px;
               width : 50px;
               height : 50px;
               border : none;
               color : #fff;
               background-color : blue;
               font-size : 15px;
               font-weight : bold;
               border-radius: 50%;
               cursor : pointer;
               line-height : 50px;
               `;

               //버튼클릭시 선택요소제거
            btn.onclick = function() {
               mv.remove(); 
            };



      }; //박스클릭시 익명 함수내부에서 실행되는 showMV 함수 끝

      </script>
   </head>

   <body>
      <h1>JS4-1. 배열변수와 객체</h1>

      <div class="cont">0</div>
      <div class="cont">1</div>
      <div class="cont">2</div>
      <div class="cont">3</div>
      <div class="cont">4</div>
      <div class="cont">5</div>
      <!-- 영화초이스박스 -->
      <div class="cont choice"></div>

      <!-- 영화예고편용 박스 -->
      <aside id="mvbox"></aside>
   </body>
</html>
